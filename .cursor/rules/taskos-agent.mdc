---
description: TaskOS task lifecycle management - update task status and log activity when working on tasks sent from the TaskOS VS Code extension
globs:
alwaysApply: true
---

# TaskOS Agent Integration

When you receive a task from the TaskOS VS Code extension, a file `.taskos-current-task.json` will exist in the workspace root with the task context.

## Required Workflow

### When starting work on a task:

If `.taskos-current-task.json` exists in the workspace root, **ALWAYS run this as your first action before writing any code**:

```bash
node taskos-update-task.mjs in_progress "Starting implementation of [brief description]"
```

### When finishing work on a task:

After completing the implementation and before presenting your summary, **ALWAYS run**:

```bash
node taskos-update-task.mjs done "Concise summary: what was implemented, what files changed, any important decisions made"
```

The summary should be 1-3 sentences describing what was actually done. Example:
- "Implemented AES-256-GCM encryption with base64url encoding. Added key length validation at startup. Supports legacy hex format for backward compatibility."
- "Fixed authentication rate limiting to key by IP+identifier to prevent NAT lockout. Added logging on rate limit hits."

### If you need human review before marking done:

```bash
node taskos-update-task.mjs review "Completed implementation, needs review of [specific concern]"
```

## Rules

1. **Always check** if `.taskos-current-task.json` exists before starting any task from the TaskOS extension
2. **Never skip** the `in_progress` update -- it lets the team know work has started
3. **Never skip** the `done` update -- it closes the loop in TaskOS
4. **The summary matters** -- write something meaningful that would be useful in a changelog
5. If `node taskos-update-task.mjs` fails (network error, etc.), log the error but **continue with your task** -- don't block on it

## What the script does

- Updates the task status in TaskOS (`in_progress` / `done` / `review`)
- Logs an activity entry on the task with your summary
- These appear in the TaskOS web app and VS Code extension in real time
